{"version":3,"file":"Subscribers-DCzfvUkb.js","sources":["../../../resources/js/views/tenant_dashboard/Subscribers.vue"],"sourcesContent":["// ... existing code ...\n<template>\n  <div class=\"Reservations-page\">\n    <div class=\"d-flex justify-content-between align-items-center mb-4\">\n      <h4 class=\"mb-0\">Subscribers List</h4>\n    </div>\n    <!-- Filters -->\n    <div class=\"mb-4\">\n      <div class=\"filter-body\">\n        <div class=\"row g-3 align-items-end\">\n          <div class=\"col-md-6\">\n            <label class=\"form-label mb-1\">Search</label>\n            <input v-model=\"filters.search\" @input=\"applyFilters\" type=\"text\" class=\"form-control filter-input\" placeholder=\"Search by email\">\n          </div>\n        </div>\n      </div>\n    </div>\n    <!-- Subscribers Table -->\n    <div class=\"card\">\n      <div class=\"card-body\">\n        <div v-if=\"loading\" class=\"text-center py-5\">\n          <div class=\"spinner-border text-danger\" role=\"status\"><span class=\"visually-hidden\">Loading...</span></div>\n        </div>\n        <div v-else-if=\"subscribers.length === 0\" class=\"text-center py-5 text-muted\">\n          <i class=\"fas fa-store fa-3x mb-3\" style=\"color: #bdbdbd;\"></i>\n          <div class=\"h5 mb-2\">No Subscribers Found</div>\n          <div>No subscribers match your search criteria.<br>Try adjusting your filters.</div>\n        </div>\n        <div v-else class=\"table-responsive\">\n          <table class=\"table table-hover table-sm Reservations-table\">\n            <thead>\n              <tr>\n                <th>Email</th>\n                <th>Created At</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr v-for=\"subscriber in subscribers\" :key=\"subscriber.id\">\n                <td>\n                  <span>{{ subscriber.email }}</span>\n                  <button class=\"btn btn-link btn-copy p-0 ms-2\" @click=\"copyEmail(subscriber.email)\" title=\"Copy Email\">\n                    <i class=\"fas fa-copy\"></i>\n                  </button>\n                </td>\n                <td>{{ subscriber.created_at ? new Date(subscriber.created_at).toLocaleString() : '' }}</td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n        <!-- Pagination -->\n        <div v-if=\"pagination.total > 0\" class=\"d-flex justify-content-between align-items-center mt-3\">\n          <div class=\"text-muted\">\n            Showing {{ pagination.from }} to {{ pagination.to }} of {{ pagination.total }} entries\n          </div>\n          <nav v-if=\"pagination.last_page > 1\">\n            <ul class=\"pagination mb-0\">\n              <li class=\"page-item\" :class=\"{ disabled: pagination.current_page === 1 }\">\n                <button class=\"page-link\" @click=\"goToPage(pagination.current_page - 1)\" :disabled=\"pagination.current_page === 1\">&laquo;</button>\n              </li>\n              <li v-for=\"page in paginationWindow\" :key=\"page\" class=\"page-item\" :class=\"{ active: page === pagination.current_page }\">\n                <button class=\"page-link\" @click=\"goToPage(page)\">{{ page }}</button>\n              </li>\n              <li class=\"page-item\" :class=\"{ disabled: pagination.current_page === pagination.last_page }\">\n                <button class=\"page-link\" @click=\"goToPage(pagination.current_page + 1)\" :disabled=\"pagination.current_page === pagination.last_page\">&raquo;</button>\n              </li>\n            </ul>\n          </nav>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted, computed } from 'vue'\nimport axios from 'axios'\nimport Swal from 'sweetalert2'\n\nconst subscribers = ref([])\nconst loading = ref(false)\nconst filters = ref({ search: '' })\nconst pagination = ref({\n  current_page: 1,\n  last_page: 1,\n  per_page: 8,\n  total: 0,\n  from: 0,\n  to: 0\n})\n\nconst fetchSubscribers = async (page = 1) => {\n  loading.value = true\n  try {\n    const params = {\n      page,\n      per_page: pagination.value.per_page,\n      search: filters.value.search\n    }\n    const response = await axios.get('/tenant/subscribers-list', { params })\n    if (response.data.success) {\n      const { data, current_page, last_page, per_page, total, from, to } = response.data.data\n      subscribers.value = data\n      pagination.value = { current_page, last_page, per_page, total, from, to }\n    } else {\n      subscribers.value = []\n      pagination.value = { current_page: 1, last_page: 1, per_page: 8, total: 0, from: 0, to: 0 }\n    }\n  } catch (error) {\n    subscribers.value = []\n    Swal.fire({ icon: 'error', title: 'Error', text: 'Failed to fetch subscribers.' })\n  } finally {\n    loading.value = false\n  }\n}\n\nconst applyFilters = () => {\n  fetchSubscribers(1)\n}\n\nconst goToPage = (page) => {\n  if (page < 1 || page > pagination.value.last_page) return\n  fetchSubscribers(page)\n}\n\nconst copyEmail = (email) => {\n  navigator.clipboard.writeText(email)\n    .then(() => {\n      Swal.fire({\n        icon: 'success',\n        title: 'Copied!',\n        text: 'Email copied to clipboard.',\n        toast: true,\n        position: 'top-end',\n        showConfirmButton: false,\n        timer: 1200\n      })\n    })\n    .catch(() => {\n      Swal.fire({\n        icon: 'error',\n        title: 'Error',\n        text: 'Failed to copy email.'\n      })\n    })\n}\n\n// Pagination window logic\nconst paginationWindow = computed(() => {\n  const total = pagination.value.last_page\n  const current = pagination.value.current_page\n  const windowSize = 5\n  let start = Math.max(1, current - 2)\n  let end = Math.min(total, current + 2)\n  if (end - start < windowSize - 1) {\n    if (start === 1) {\n      end = Math.min(total, start + windowSize - 1)\n    } else if (end === total) {\n      start = Math.max(1, end - windowSize + 1)\n    }\n  }\n  const pages = []\n  for (let i = start; i <= end; i++) pages.push(i)\n  return pages\n})\n\nonMounted(() => {\n  fetchSubscribers()\n})\n</script>\n\n<style scoped>\n/* ... reuse styles from Reservations.vue ... */\n.Reservations-page {\n  padding: 20px;\n  font-family: 'Inter', 'Roboto', 'Segoe UI', Arial, sans-serif;\n  font-size: 16px;\n}\n.filter-body {\n  padding: 0;\n}\n.filter-input {\n  border-radius: 8px;\n  font-size: 15px;\n  border: 1px solid #e0e0e0;\n  background: #fafbfc;\n}\n.Reservations-table {\n  border: 1px solid #e0e0e0;\n  box-shadow: 0 2px 8px rgba(60,60,60,0.06);\n  font-size: 15px;\n  border-radius: 8px;\n  overflow: hidden;\n}\n.Reservations-table thead th {\n  background: #fafbfc;\n  position: sticky;\n  top: 0;\n  z-index: 2;\n  font-weight: 500;\n  color: #b71c1c;\n}\n.Reservations-table tbody tr:nth-child(even) {\n  background: #f7f7f7;\n}\n.Reservations-table tbody tr:hover {\n  background: #fff3f3;\n}\n.pagination .page-link {\n  color: #6c757d;\n  border: none;\n  background-color: transparent;\n  border-radius: 0.25rem;\n  margin: 0 2px;\n  padding: 0.5rem 0.75rem;\n}\n.pagination .page-item.active .page-link {\n  background-color: #c62828;\n  color: #fff;\n  z-index: 3;\n}\n.pagination .page-item.disabled .page-link {\n  color: #ced4da;\n}\n.pagination .page-link:hover {\n  background-color: #f1f1f1;\n}\n.btn-copy {\n  color: #b71c1c;\n  font-size: 1rem;\n  vertical-align: middle;\n  background: none;\n  border: none;\n  cursor: pointer;\n  transition: color 0.2s;\n}\n.btn-copy:hover {\n  color: #c62828;\n}\n</style>\n"],"names":["subscribers","ref","loading","filters","pagination","fetchSubscribers","page","params","response","axios","data","current_page","last_page","per_page","total","from","to","Swal","applyFilters","goToPage","copyEmail","email","paginationWindow","computed","current","windowSize","start","end","pages","i","onMounted"],"mappings":"gtBA8EA,MAAMA,EAAcC,EAAI,CAAE,CAAA,EACpBC,EAAUD,EAAI,EAAK,EACnBE,EAAUF,EAAI,CAAE,OAAQ,EAAI,CAAA,EAC5BG,EAAaH,EAAI,CACrB,aAAc,EACd,UAAW,EACX,SAAU,EACV,MAAO,EACP,KAAM,EACN,GAAI,CACN,CAAC,EAEKI,EAAmB,MAAOC,EAAO,IAAM,CAC3CJ,EAAQ,MAAQ,GAChB,GAAI,CACF,MAAMK,EAAS,CACb,KAAAD,EACA,SAAUF,EAAW,MAAM,SAC3B,OAAQD,EAAQ,MAAM,MAC5B,EACUK,EAAW,MAAMC,EAAM,IAAI,2BAA4B,CAAE,OAAAF,CAAQ,CAAA,EACvE,GAAIC,EAAS,KAAK,QAAS,CACzB,KAAM,CAAE,KAAAE,EAAM,aAAAC,EAAc,UAAAC,EAAW,SAAAC,EAAU,MAAAC,EAAO,KAAAC,EAAM,GAAAC,CAAE,EAAKR,EAAS,KAAK,KACnFR,EAAY,MAAQU,EACpBN,EAAW,MAAQ,CAAE,aAAAO,EAAc,UAAAC,EAAW,SAAAC,EAAU,MAAAC,EAAO,KAAAC,EAAM,GAAAC,CAAE,CAC7E,MACMhB,EAAY,MAAQ,CAAA,EACpBI,EAAW,MAAQ,CAAE,aAAc,EAAG,UAAW,EAAG,SAAU,EAAG,MAAO,EAAG,KAAM,EAAG,GAAI,CAAC,CAE5F,MAAe,CACdJ,EAAY,MAAQ,CAAA,EACpBiB,EAAK,KAAK,CAAE,KAAM,QAAS,MAAO,QAAS,KAAM,8BAAgC,CAAA,CACrF,QAAY,CACRf,EAAQ,MAAQ,EACpB,CACA,EAEMgB,EAAe,IAAM,CACzBb,EAAiB,CAAC,CACpB,EAEMc,EAAYb,GAAS,CACrBA,EAAO,GAAKA,EAAOF,EAAW,MAAM,WACxCC,EAAiBC,CAAI,CACvB,EAEMc,EAAaC,GAAU,CAC3B,UAAU,UAAU,UAAUA,CAAK,EAChC,KAAK,IAAM,CACVJ,EAAK,KAAK,CACR,KAAM,UACN,MAAO,UACP,KAAM,6BACN,MAAO,GACP,SAAU,UACV,kBAAmB,GACnB,MAAO,IACR,CAAA,CACF,CAAA,EACA,MAAM,IAAM,CACXA,EAAK,KAAK,CACR,KAAM,QACN,MAAO,QACP,KAAM,uBACP,CAAA,CACF,CAAA,CACL,EAGMK,EAAmBC,EAAS,IAAM,CACtC,MAAMT,EAAQV,EAAW,MAAM,UACzBoB,EAAUpB,EAAW,MAAM,aAC3BqB,EAAa,EACnB,IAAIC,EAAQ,KAAK,IAAI,EAAGF,EAAU,CAAC,EAC/BG,EAAM,KAAK,IAAIb,EAAOU,EAAU,CAAC,EACjCG,EAAMD,EAAQD,EAAa,IACzBC,IAAU,EACZC,EAAM,KAAK,IAAIb,EAAOY,EAAQD,EAAa,CAAC,EACnCE,IAAQb,IACjBY,EAAQ,KAAK,IAAI,EAAGC,EAAMF,EAAa,CAAC,IAG5C,MAAMG,EAAQ,CAAA,EACd,QAASC,EAAIH,EAAOG,GAAKF,EAAKE,IAAKD,EAAM,KAAKC,CAAC,EAC/C,OAAOD,CACT,CAAC,EAED,OAAAE,EAAU,IAAM,CACdzB,EAAgB,CAClB,CAAC"}