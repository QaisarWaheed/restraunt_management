import{_ as h,c as i,o as n,a as o,i as w,j as g,b as d,v as u,n as p,t as c,f as L,K as y,L as v,h as k,N as _,S as m}from"./app-BLvk--SP.js";const x={name:"Login",setup(){const f=y(),e=v(!1),t=v({}),s=k({email:"",password:""});return{form:s,errors:t,loading:e,handleLogin:async()=>{var l,r;e.value=!0,t.value={};try{const a=await _.post("/login",s);a.data.success?(localStorage.setItem("token",a.data.token),localStorage.setItem("user",JSON.stringify({...a.data.user,roles:a.data.user.roles})),_.defaults.headers.common.Authorization=`Bearer ${a.data.token}`,await m.fire({icon:"success",title:"Login Successful",text:"Welcome back!",timer:1500,showConfirmButton:!1,position:"top-end",toast:!0}),f.push("/dashboard")):t.value={email:[a.data.message||"Login failed"]}}catch(a){console.error("Login error:",a),(r=(l=a.response)==null?void 0:l.data)!=null&&r.message?m.fire({icon:"error",title:"Login Failed",text:a.response.data.message,confirmButtonColor:"#dc3545"}):m.fire({icon:"error",title:"Login Failed",text:"Invalid credentials",confirmButtonColor:"#dc3545"})}finally{e.value=!1}}}}},S={class:"login-page"},B={class:"container"},C={class:"row justify-content-center"},N={class:"col-md-6 col-lg-4"},V={class:"card shadow-sm"},I={class:"card-body p-4"},E={class:"mb-3"},U={key:0,class:"invalid-feedback"},j={class:"mb-3"},q={key:0,class:"invalid-feedback"},z={class:"d-grid"},D=["disabled"],F={key:0,class:"spinner-border spinner-border-sm me-1"};function M(f,e,t,s,b,l){return n(),i("div",S,[o("div",B,[o("div",C,[o("div",N,[o("div",V,[o("div",I,[e[5]||(e[5]=o("div",{class:"text-center mb-4"},[o("img",{src:"/images/logo.png",alt:"Logo",class:"logo mb-3"}),o("h4",{class:"card-title"},"Super User Login"),o("p",{class:"text-muted"},"Enter your credentials to access the dashboard")],-1)),o("form",{onSubmit:e[2]||(e[2]=w((...r)=>s.handleLogin&&s.handleLogin(...r),["prevent"]))},[o("div",E,[e[3]||(e[3]=o("label",{for:"email",class:"form-label"},"Email address",-1)),g(o("input",{type:"email",class:p(["form-control",{"is-invalid":s.errors.email}]),id:"email","onUpdate:modelValue":e[0]||(e[0]=r=>s.form.email=r),required:""},null,2),[[u,s.form.email]]),s.errors.email?(n(),i("div",U,c(s.errors.email[0]),1)):d("",!0)]),o("div",j,[e[4]||(e[4]=o("label",{for:"password",class:"form-label"},"Password",-1)),g(o("input",{type:"password",class:p(["form-control",{"is-invalid":s.errors.password}]),id:"password","onUpdate:modelValue":e[1]||(e[1]=r=>s.form.password=r),required:""},null,2),[[u,s.form.password]]),s.errors.password?(n(),i("div",q,c(s.errors.password[0]),1)):d("",!0)]),o("div",z,[o("button",{type:"submit",class:"btn btn-primary",disabled:s.loading},[s.loading?(n(),i("span",F)):d("",!0),L(" "+c(s.loading?"Logging in...":"Login"),1)],8,D)])],32)])])])])])])}const A=h(x,[["render",M],["__scopeId","data-v-3e5d31fc"]]);export{A as default};
//# sourceMappingURL=Login-B0HpCPzN.js.map
