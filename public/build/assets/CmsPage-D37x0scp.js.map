{"version":3,"file":"CmsPage-D37x0scp.js","sources":["../../../resources/js/views/tenant/CmsPage.vue"],"sourcesContent":["<template>\n  <div class=\"cms-page\">\n    <div class=\"container py-5\">\n      <div v-if=\"loading\" class=\"text-center py-5\">\n        <div class=\"spinner-border text-danger\" role=\"status\">\n          <span class=\"visually-hidden\">Loading...</span>\n        </div>\n      </div>\n\n      <div v-else-if=\"!page\" class=\"text-center py-5\">\n        <div class=\"error-content\">\n          <i class=\"fas fa-file-slash fa-4x text-muted mb-4\"></i>\n          <h2 class=\"text-muted mb-3\">Page Not Found</h2>\n          <p class=\"text-muted mb-4\">The page you're looking for doesn't exist or has been removed.</p>\n          <router-link to=\"/\" class=\"btn btn-danger\">\n            <i class=\"fas fa-home me-2\"></i>Back to Home\n          </router-link>\n        </div>\n      </div>\n\n      <div v-else class=\"cms-content\">\n        <!-- Page Header -->\n        <div class=\"page-header text-center mb-5\">\n          <h1 class=\"page-title\">{{ page.page_title }}</h1>\n          <div class=\"page-meta text-muted\">\n            <span v-if=\"page.menu?.page_title\" class=\"me-3\">\n              <i class=\"fas fa-folder me-1\"></i>{{ page.menu.page_title }}\n            </span>\n            <span class=\"me-3\">\n              <i class=\"fas fa-calendar me-1\"></i>{{ formatDate(page.created_at) }}\n            </span>\n            <span v-if=\"page.keyword\" class=\"me-3\">\n              <i class=\"fas fa-tag me-1\"></i>{{ page.keyword }}\n            </span>\n          </div>\n        </div>\n\n        <!-- Page Content -->\n        <div class=\"page-body\">\n          <div class=\"content-wrapper\" v-html=\"page.content\"></div>\n        </div>\n\n        <!-- Navigation -->\n        <div class=\"page-navigation mt-5 pt-4 border-top\">\n          <div class=\"row\">\n            <div class=\"col-md-6 mb-3 mb-md-0\">\n              <router-link v-if=\"previousPage\" :to=\"{ name: 'cms-page', params: { slug: previousPage.keyword } }\" class=\"btn btn-outline-secondary\">\n                <i class=\"fas fa-arrow-left me-2\"></i>{{ previousPage.page_title }}\n              </router-link>\n            </div>\n            <div class=\"col-md-6 text-md-end\">\n              <router-link v-if=\"nextPage\" :to=\"{ name: 'cms-page', params: { slug: nextPage.keyword } }\" class=\"btn btn-outline-secondary\">\n                {{ nextPage.page_title }}<i class=\"fas fa-arrow-right ms-2\"></i>\n              </router-link>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted, computed, watch } from 'vue'\nimport { useRoute } from 'vue-router'\nimport axios from 'axios'\n\nconst route = useRoute()\nconst page = ref(null)\nconst loading = ref(true)\nconst allPages = ref([])\n\nconst fetchPage = async () => {\n  try {\n    loading.value = true\n    console.log('Fetching page for slug:', route.params.slug)\n    const response = await axios.get(`/tenant/cms_page/${route.params.slug}`)\n    page.value = response.data.data\n    console.log('Page data loaded:', page.value?.page_title)\n  } catch (error) {\n    console.error('Error fetching page:', error)\n    page.value = null\n  } finally {\n    loading.value = false\n  }\n}\n\nconst fetchAllPages = async () => {\n  try {\n    const response = await axios.get('/tenant/cms_menu', {\n      params: {\n        status: 'active',\n        per_page: 1000 // Get all pages for navigation\n      }\n    })\n    allPages.value = response.data.data.data || []\n  } catch (error) {\n    console.error('Error fetching all pages:', error)\n    allPages.value = []\n  }\n}\n\nconst formatDate = (dateString) => {\n  return new Date(dateString).toLocaleDateString('en-US', {\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric'\n  })\n}\n\nconst currentPageIndex = computed(() => {\n  return allPages.value.findIndex(p => p.keyword === route.params.slug)\n})\n\nconst previousPage = computed(() => {\n  const index = currentPageIndex.value\n  return index > 0 ? allPages.value[index - 1] : null\n})\n\nconst nextPage = computed(() => {\n  const index = currentPageIndex.value\n  return index >= 0 && index < allPages.value.length - 1 ? allPages.value[index + 1] : null\n})\n\nonMounted(async () => {\n  await Promise.all([fetchPage(), fetchAllPages()])\n})\n\n// Watch for route changes to refetch page data\nwatch(\n  () => route.fullPath,\n  async (newPath, oldPath) => {\n    if (newPath !== oldPath) {\n      // Reset page state and loading\n      page.value = null\n      loading.value = true\n      await fetchPage()\n    }\n  }\n)\n</script>\n\n<style scoped>\n.cms-page {\n  min-height: 60vh;\n  background: #f8f9fa;\n}\n\n.page-header {\n  background: white;\n  padding: 3rem 2rem;\n  border-radius: 12px;\n  box-shadow: 0 2px 12px rgba(0,0,0,0.08);\n  margin-bottom: 2rem;\n}\n\n.page-title {\n  font-family: 'Playfair Display', serif;\n  font-size: 2.5rem;\n  font-weight: bold;\n  color: #2c3e50;\n  margin-bottom: 1rem;\n}\n\n.page-meta {\n  font-size: 0.95rem;\n}\n\n.page-body {\n  background: white;\n  padding: 3rem;\n  border-radius: 12px;\n  box-shadow: 0 2px 12px rgba(0,0,0,0.08);\n  margin-bottom: 2rem;\n}\n\n.content-wrapper {\n  font-size: 1.1rem;\n  line-height: 1.8;\n  color: #2c3e50;\n}\n\n.content-wrapper :deep(h1),\n.content-wrapper :deep(h2),\n.content-wrapper :deep(h3),\n.content-wrapper :deep(h4),\n.content-wrapper :deep(h5),\n.content-wrapper :deep(h6) {\n  font-family: 'Playfair Display', serif;\n  font-weight: bold;\n  color: #2c3e50;\n  margin-top: 2rem;\n  margin-bottom: 1rem;\n}\n\n.content-wrapper :deep(h1) { font-size: 2.2rem; }\n.content-wrapper :deep(h2) { font-size: 1.8rem; }\n.content-wrapper :deep(h3) { font-size: 1.5rem; }\n.content-wrapper :deep(h4) { font-size: 1.3rem; }\n.content-wrapper :deep(h5) { font-size: 1.1rem; }\n.content-wrapper :deep(h6) { font-size: 1rem; }\n\n.content-wrapper :deep(p) {\n  margin-bottom: 1.5rem;\n}\n\n.content-wrapper :deep(ul),\n.content-wrapper :deep(ol) {\n  margin-bottom: 1.5rem;\n  padding-left: 2rem;\n}\n\n.content-wrapper :deep(li) {\n  margin-bottom: 0.5rem;\n}\n\n.content-wrapper :deep(blockquote) {\n  border-left: 4px solid #dc3545;\n  padding-left: 1.5rem;\n  margin: 2rem 0;\n  font-style: italic;\n  color: #6c757d;\n}\n\n.content-wrapper :deep(img) {\n  max-width: 100%;\n  height: auto;\n  border-radius: 8px;\n  margin: 1.5rem 0;\n  box-shadow: 0 4px 12px rgba(0,0,0,0.1);\n}\n\n.content-wrapper :deep(table) {\n  width: 100%;\n  border-collapse: collapse;\n  margin: 1.5rem 0;\n  border-radius: 8px;\n  overflow: hidden;\n  box-shadow: 0 2px 8px rgba(0,0,0,0.1);\n}\n\n.content-wrapper :deep(th),\n.content-wrapper :deep(td) {\n  padding: 0.75rem;\n  border: 1px solid #dee2e6;\n}\n\n.content-wrapper :deep(th) {\n  background: #f8f9fa;\n  font-weight: bold;\n}\n\n.content-wrapper :deep(a) {\n  color: #dc3545;\n  text-decoration: none;\n}\n\n.content-wrapper :deep(a:hover) {\n  text-decoration: underline;\n}\n\n.page-navigation {\n  background: white;\n  padding: 2rem;\n  border-radius: 12px;\n  box-shadow: 0 2px 12px rgba(0,0,0,0.08);\n}\n\n.error-content {\n  max-width: 500px;\n  margin: 0 auto;\n}\n\n/* Responsive Design */\n@media (max-width: 768px) {\n  .page-header {\n    padding: 2rem 1rem;\n  }\n\n  .page-title {\n    font-size: 2rem;\n  }\n\n  .page-body {\n    padding: 2rem 1.5rem;\n  }\n\n  .content-wrapper {\n    font-size: 1rem;\n  }\n\n  .content-wrapper :deep(h1) { font-size: 1.8rem; }\n  .content-wrapper :deep(h2) { font-size: 1.5rem; }\n  .content-wrapper :deep(h3) { font-size: 1.3rem; }\n}\n\n@media (max-width: 576px) {\n  .page-header {\n    padding: 1.5rem 1rem;\n  }\n\n  .page-title {\n    font-size: 1.8rem;\n  }\n\n  .page-body {\n    padding: 1.5rem 1rem;\n  }\n\n  .page-meta {\n    font-size: 0.9rem;\n  }\n\n  .page-meta span {\n    display: block;\n    margin-bottom: 0.5rem;\n  }\n}\n</style>\n"],"names":["route","useRoute","page","ref","loading","allPages","fetchPage","response","axios","_a","error","fetchAllPages","formatDate","dateString","currentPageIndex","computed","p","previousPage","index","nextPage","onMounted","watch","newPath","oldPath"],"mappings":"4qBAmEA,MAAMA,EAAQC,EAAQ,EAChBC,EAAOC,EAAI,IAAI,EACfC,EAAUD,EAAI,EAAI,EAClBE,EAAWF,EAAI,CAAE,CAAA,EAEjBG,EAAY,SAAY,OAC5B,GAAI,CACFF,EAAQ,MAAQ,GAChB,QAAQ,IAAI,0BAA2BJ,EAAM,OAAO,IAAI,EACxD,MAAMO,EAAW,MAAMC,EAAM,IAAI,oBAAoBR,EAAM,OAAO,IAAI,EAAE,EACxEE,EAAK,MAAQK,EAAS,KAAK,KAC3B,QAAQ,IAAI,qBAAqBE,EAAAP,EAAK,QAAL,YAAAO,EAAY,UAAU,CACxD,OAAQC,EAAO,CACd,QAAQ,MAAM,uBAAwBA,CAAK,EAC3CR,EAAK,MAAQ,IACjB,QAAY,CACRE,EAAQ,MAAQ,EACpB,CACA,EAEMO,EAAgB,SAAY,CAChC,GAAI,CACF,MAAMJ,EAAW,MAAMC,EAAM,IAAI,mBAAoB,CACnD,OAAQ,CACN,OAAQ,SACR,SAAU,GAClB,CACK,CAAA,EACDH,EAAS,MAAQE,EAAS,KAAK,KAAK,MAAQ,CAAA,CAC7C,OAAQG,EAAO,CACd,QAAQ,MAAM,4BAA6BA,CAAK,EAChDL,EAAS,MAAQ,CAAA,CACrB,CACA,EAEMO,EAAcC,GACX,IAAI,KAAKA,CAAU,EAAE,mBAAmB,QAAS,CACtD,KAAM,UACN,MAAO,OACP,IAAK,SACN,CAAA,EAGGC,EAAmBC,EAAS,IACzBV,EAAS,MAAM,UAAUW,GAAKA,EAAE,UAAYhB,EAAM,OAAO,IAAI,CACrE,EAEKiB,EAAeF,EAAS,IAAM,CAClC,MAAMG,EAAQJ,EAAiB,MAC/B,OAAOI,EAAQ,EAAIb,EAAS,MAAMa,EAAQ,CAAC,EAAI,IACjD,CAAC,EAEKC,EAAWJ,EAAS,IAAM,CAC9B,MAAMG,EAAQJ,EAAiB,MAC/B,OAAOI,GAAS,GAAKA,EAAQb,EAAS,MAAM,OAAS,EAAIA,EAAS,MAAMa,EAAQ,CAAC,EAAI,IACvF,CAAC,EAED,OAAAE,EAAU,SAAY,CACpB,MAAM,QAAQ,IAAI,CAACd,EAAW,EAAEK,EAAa,CAAE,CAAC,CAClD,CAAC,EAGDU,EACE,IAAMrB,EAAM,SACZ,MAAOsB,EAASC,IAAY,CACtBD,IAAYC,IAEdrB,EAAK,MAAQ,KACbE,EAAQ,MAAQ,GAChB,MAAME,EAAS,EAErB,CACA"}