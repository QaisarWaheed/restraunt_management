import{_ as E,c as h,o as m,a as t,j as y,v as F,O as L,t as e,F as B,g as D,f as k,n as w,L as f,B as I,C as Q,N as _,S as c}from"./app-BLvk--SP.js";const V={name:"Tenants",setup(){const s=f([]),d=f(""),p=f(""),a=f(!1),g=I(()=>s.value.filter(o=>{const l=!d.value||o.name.toLowerCase().includes(d.value.toLowerCase())||o.owner_name.toLowerCase().includes(d.value.toLowerCase())||o.owner_email.toLowerCase().includes(d.value.toLowerCase()),i=!p.value||o.status===p.value;return l&&i})),u=async()=>{var o,l,i;try{a.value=!0;const r=await _.get("/dashboard/tenants");s.value=r.data.data||[]}catch(r){console.error("Error fetching tenants:",r),((o=r.response)==null?void 0:o.status)!==404?c.fire({icon:"error",title:"Error",text:((i=(l=r.response)==null?void 0:l.data)==null?void 0:i.message)||"Failed to load restaurants. Please try again."}):s.value=[]}finally{a.value=!1}},n=async o=>{var l,i;try{a.value=!0,await _.post(`/dashboard/tenants/${o.id}/approve`),await u(),c.fire({icon:"success",title:"Success",text:"Restaurant approved successfully"})}catch(r){console.error("Error approving tenant:",r),c.fire({icon:"error",title:"Error",text:((i=(l=r.response)==null?void 0:l.data)==null?void 0:i.message)||"Failed to approve restaurant"})}finally{a.value=!1}},v=async o=>{var l,i;try{a.value=!0,await _.post(`/dashboard/tenants/${o.id}/suspend`),await u(),c.fire({icon:"success",title:"Success",text:"Restaurant suspended successfully"})}catch(r){console.error("Error suspending tenant:",r),c.fire({icon:"error",title:"Error",text:((i=(l=r.response)==null?void 0:l.data)==null?void 0:i.message)||"Failed to suspend restaurant"})}finally{a.value=!1}},$=async o=>{var l,i;try{a.value=!0,await _.post(`/dashboard/tenants/${o.id}/activate`),await u(),c.fire({icon:"success",title:"Success",text:"Restaurant activated successfully"})}catch(r){console.error("Error activating tenant:",r),c.fire({icon:"error",title:"Error",text:((i=(l=r.response)==null?void 0:l.data)==null?void 0:i.message)||"Failed to activate restaurant"})}finally{a.value=!1}},S=async(o,l)=>{var i,r;try{a.value=!0,await _.patch(`/dashboard/tenants/${o.id}/status`,{status:l}),await u(),c.fire({icon:"success",title:"Success",text:`Tenant status changed to ${l}`})}catch(b){console.error("Error changing tenant status:",b),c.fire({icon:"error",title:"Error",text:((r=(i=b.response)==null?void 0:i.data)==null?void 0:r.message)||"Failed to change tenant status"})}finally{a.value=!1}},C=o=>({active:"bg-success",pending:"bg-warning",suspended:"bg-danger"})[o]||"bg-secondary",T=o=>new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return Q(()=>{u()}),{tenants:s,searchQuery:d,statusFilter:p,loading:a,filteredTenants:g,approveTenant:n,suspendTenant:v,activateTenant:$,changeTenantStatus:S,getStatusBadgeClass:C,formatDate:T}}},M={class:"tenants"},N={class:"card"},R={class:"card-body"},U={class:"row mb-4"},P={class:"col-md-4"},j={class:"input-group"},z=["placeholder"],O={class:"btn btn-outline-secondary"},q=["title"],A={class:"col-md-3"},G={value:""},H={value:"trial"},J={value:"active"},K={value:"inactive"},W={value:"suspended"},X={key:0,class:"table-responsive"},Y={class:"table table-hover table-sm align-middle"},Z={class:"d-none d-md-table-cell"},x={class:"d-none d-md-table-cell"},tt={class:"d-none d-md-table-cell"},et={class:"d-none d-md-table-cell"},st={class:"d-flex align-items-center"},at=["src","alt"],nt={class:"fw-bold"},ot={class:"text-muted"},lt={class:"d-md-none small mt-1"},rt={class:"mt-1"},it=["disabled","value","onChange"],dt={value:"trial"},ct={value:"active"},ut={value:"inactive"},vt={value:"suspended"},ht={class:"d-none d-md-table-cell"},mt={class:"text-muted"},_t={class:"d-none d-md-table-cell"},pt={class:"d-none d-md-table-cell"},ft={class:"d-none d-md-table-cell"},gt=["disabled","value","onChange"],bt={value:"trial"},yt={value:"active"},wt={value:"inactive"},$t={value:"suspended"},St={key:1,class:"text-center py-5"},Ct={class:"empty-state"},Tt={class:"text-muted"};function Et(s,d,p,a,g,u){return m(),h("div",M,[t("div",N,[t("div",R,[t("div",U,[t("div",P,[t("div",j,[y(t("input",{type:"text",class:"form-control","onUpdate:modelValue":d[0]||(d[0]=n=>a.searchQuery=n),placeholder:s.$t("tenants.filters.searchPlaceholder")},null,8,z),[[F,a.searchQuery]]),t("button",O,[t("i",{class:"fas fa-search",title:s.$t("common.search")},null,8,q)])])]),t("div",A,[y(t("select",{class:"form-select","onUpdate:modelValue":d[1]||(d[1]=n=>a.statusFilter=n)},[t("option",G,e(s.$t("tenants.filters.allStatus")),1),t("option",H,e(s.$t("tenants.status.trial")),1),t("option",J,e(s.$t("tenants.status.active")),1),t("option",K,e(s.$t("tenants.status.inactive")||"Inactive"),1),t("option",W,e(s.$t("tenants.status.suspended")),1)],512),[[L,a.statusFilter]])])]),a.filteredTenants.length>0?(m(),h("div",X,[t("table",Y,[t("thead",null,[t("tr",null,[t("th",null,e(s.$t("tenants.list.name")),1),t("th",Z,e(s.$t("tenants.list.owner")),1),t("th",x,e(s.$t("tenants.list.domain")),1),t("th",tt,e(s.$t("tenants.list.status")),1),t("th",et,e(s.$t("common.actions")),1)])]),t("tbody",null,[(m(!0),h(B,null,D(a.filteredTenants,n=>(m(),h("tr",{key:n.id,class:"d-block d-md-table-row w-100 mb-2 mb-md-0"},[t("td",null,[t("div",st,[t("img",{src:n.logo||"/images/default-restaurant.png",alt:n.name,class:"tenant-logo me-2"},null,8,at),t("div",null,[t("div",nt,e(n.name),1),t("small",ot,"Created: "+e(a.formatDate(n.created_at)),1),t("div",lt,[t("div",null,e(s.$t("tenants.list.owner"))+": "+e(n.owner_name)+" ("+e(n.owner_email)+")",1),t("div",null,e(s.$t("tenants.list.domain"))+": "+e(n.subdomain)+".yourdomain.com",1),t("div",null,[k(e(s.$t("tenants.list.status"))+": ",1),t("span",{class:w(["badge",a.getStatusBadgeClass(n.status)])},e(n.status),3)]),t("div",rt,[t("select",{class:"form-select form-select-sm",disabled:a.loading,value:n.status,onChange:v=>a.changeTenantStatus(n,v.target.value)},[t("option",dt,e(s.$t("tenants.status.trial")),1),t("option",ct,e(s.$t("tenants.status.active")),1),t("option",ut,e(s.$t("tenants.status.inactive")||"Inactive"),1),t("option",vt,e(s.$t("tenants.status.suspended")),1)],40,it)])])])])]),t("td",ht,[t("div",null,e(n.owner_name),1),t("small",mt,e(n.owner_email),1)]),t("td",_t,e(n.subdomain)+".yourdomain.com",1),t("td",pt,[t("span",{class:w(["badge",a.getStatusBadgeClass(n.status)])},e(n.status),3)]),t("td",ft,[t("select",{class:"form-select form-select-sm",disabled:a.loading,value:n.status,onChange:v=>a.changeTenantStatus(n,v.target.value)},[t("option",bt,e(s.$t("tenants.status.trial")),1),t("option",yt,e(s.$t("tenants.status.active")),1),t("option",wt,e(s.$t("tenants.status.inactive")||"Inactive"),1),t("option",$t,e(s.$t("tenants.status.suspended")),1)],40,gt)])]))),128))])])])):(m(),h("div",St,[t("div",Ct,[d[2]||(d[2]=t("i",{class:"fas fa-store fa-3x text-muted mb-3"},null,-1)),t("h4",null,e(s.$t("tenants.empty.title")),1),t("p",Tt,e(a.searchQuery||a.statusFilter?s.$t("tenants.empty.filtered"):s.$t("tenants.empty.noData")),1)])]))])])])}const Lt=E(V,[["render",Et],["__scopeId","data-v-56b28355"]]);export{Lt as default};
//# sourceMappingURL=Tenants-8zrxKCvt.js.map
