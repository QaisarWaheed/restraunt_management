import{_ as $,r as B,c as u,o as h,a as s,t,e as p,w as g,f as b,F as A,g as q,n as E,b as w,i as S,L as y,C as x,z as D,N as _,S as l}from"./app-BLvk--SP.js";const U={name:"Dashboard",setup(){const e=y({totalTenants:0,activeTenants:0,pendingTenants:0,suspendedTenants:0,totalUsers:0,totalRoles:0,totalPermissions:0,activeUsersToday:0}),a=y([]),f=y(!0),n=y(null),v=async()=>{f.value=!0,n.value=null;try{const o=await _.get("/dashboard/stats");o.data&&o.data.data&&(e.value=o.data.data);const c=await _.get("/dashboard/recent-tenants");if(c.data&&c.data.data){const r=new Date().toISOString().slice(0,10);a.value=c.data.data.filter(C=>C.created_at&&C.created_at.slice(0,10)===r)}}catch(o){n.value="Failed to load dashboard data.",console.error("Error fetching dashboard data:",o)}finally{f.value=!1}},T=o=>({active:"bg-success",pending:"bg-warning",suspended:"bg-danger",trial:"bg-secondary",inactive:"bg-secondary"})[o]||"bg-secondary",d=async o=>{if((await l.fire({title:"Are you sure?",text:"Do you want to approve this tenant?",icon:"question",showCancelButton:!0,confirmButtonText:"Yes, approve",cancelButtonText:"Cancel"})).isConfirmed)try{await _.patch(`/dashboard/tenants/${o.id}/status`,{status:"active"}),await v(),l.fire({icon:"success",title:"Approved",text:"Tenant has been approved."})}catch(r){console.error("Error approving tenant:",r),l.fire({icon:"error",title:"Error",text:"Failed to approve tenant."})}},i=async o=>{if((await l.fire({title:"Are you sure?",text:"Are you sure you want to suspend this tenant?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, suspend",cancelButtonText:"Cancel"})).isConfirmed)try{await _.patch(`/dashboard/tenants/${o.id}/status`,{status:"suspended"}),await v(),l.fire({icon:"success",title:"Suspended",text:"Tenant has been suspended."})}catch(r){console.error("Error suspending tenant:",r),l.fire({icon:"error",title:"Error",text:"Failed to suspend tenant."})}},m=async o=>{if((await l.fire({title:"Are you sure?",text:"Do you want to activate this tenant?",icon:"question",showCancelButton:!0,confirmButtonText:"Yes, activate",cancelButtonText:"Cancel"})).isConfirmed)try{await _.patch(`/dashboard/tenants/${o.id}/status`,{status:"active"}),await v(),l.fire({icon:"success",title:"Activated",text:"Tenant has been activated."})}catch(r){console.error("Error activating tenant:",r),l.fire({icon:"error",title:"Error",text:"Failed to activate tenant."})}},k=async()=>{try{await _.post("/clear-cache"),alert("Cache cleared successfully")}catch(o){console.error("Error clearing cache:",o)}};return x(()=>{v(),D(()=>n.value,o=>{o&&l.fire({icon:"error",title:"Error",text:o})})}),{stats:e,recentTenants:a,loading:f,error:n,getStatusBadgeClass:T,approveTenant:d,suspendTenant:i,activateTenant:m,clearCache:k}}},F={class:"dashboard"},R={class:"row g-4 mb-4"},N={class:"col-md-3"},j={class:"stat-card"},V={class:"stat-info"},Y={class:"col-md-3"},z={class:"stat-card"},I={class:"stat-info"},L={class:"col-md-3"},M={class:"stat-card"},O={class:"stat-info"},P={class:"col-md-3"},G={class:"stat-card"},H={class:"stat-info"},J={class:"row g-4"},K={class:"col-md-6"},Q={class:"card"},W={class:"card-header d-flex justify-content-between align-items-center"},X={class:"card-title mb-0"},Z={class:"card-body"},ss={class:"table-responsive"},ts={class:"table table-hover"},as={class:"d-flex align-items-center"},es=["src","alt"],ns={class:"btn-group"},os=["onClick"],is=["onClick"],ls=["onClick"],cs={class:"col-md-6"},rs={class:"card"},ds={class:"card-header"},us={class:"card-title mb-0"},hs={class:"card-body"},_s={class:"list-group"},vs={class:"list-group-item d-flex justify-content-between align-items-center"},bs={class:"badge bg-primary rounded-pill"},fs={class:"list-group-item d-flex justify-content-between align-items-center"},ms={class:"badge bg-primary rounded-pill"},ps={class:"list-group-item d-flex justify-content-between align-items-center"},gs={class:"badge bg-success rounded-pill"},ys={class:"card mt-4"},ws={class:"card-header"},Ts={class:"card-title mb-0"},Cs={class:"card-body"},ks={class:"row g-3"},$s={class:"col-6"},Bs={class:"col-6"},As={class:"col-6"},qs={class:"col-6"};function Es(e,a,f,n,v,T){const d=B("router-link");return h(),u("div",F,[s("div",R,[s("div",N,[s("div",j,[a[1]||(a[1]=s("div",{class:"stat-icon bg-primary"},[s("i",{class:"fas fa-store"})],-1)),s("div",V,[s("h3",null,t(n.stats.totalTenants),1),s("p",null,t(e.$t("main_dashboard.stats.totalTenants")),1)])])]),s("div",Y,[s("div",z,[a[2]||(a[2]=s("div",{class:"stat-icon bg-success"},[s("i",{class:"fas fa-check-circle"})],-1)),s("div",I,[s("h3",null,t(n.stats.activeTenants),1),s("p",null,t(e.$t("main_dashboard.stats.activeTenants")),1)])])]),s("div",L,[s("div",M,[a[3]||(a[3]=s("div",{class:"stat-icon bg-warning"},[s("i",{class:"fas fa-clock"})],-1)),s("div",O,[s("h3",null,t(n.stats.pendingTenants),1),s("p",null,t(e.$t("main_dashboard.stats.pendingTenants")),1)])])]),s("div",P,[s("div",G,[a[4]||(a[4]=s("div",{class:"stat-icon bg-danger"},[s("i",{class:"fas fa-pause-circle"})],-1)),s("div",H,[s("h3",null,t(n.stats.suspendedTenants),1),s("p",null,t(e.$t("main_dashboard.stats.suspendedTenants")),1)])])])]),s("div",J,[s("div",K,[s("div",Q,[s("div",W,[s("h5",X,t(e.$t("dashboard.recentTenants")),1),p(d,{to:"/dashboard/tenants",class:"btn btn-sm btn-primary"},{default:g(()=>[b(t(e.$t("common.viewAll")),1)]),_:1})]),s("div",Z,[s("div",ss,[s("table",ts,[s("thead",null,[s("tr",null,[s("th",null,t(e.$t("tenants.list.name")),1),s("th",null,t(e.$t("tenants.list.owner")),1),s("th",null,t(e.$t("tenants.list.status")),1),s("th",null,t(e.$t("common.actions")),1)])]),s("tbody",null,[(h(!0),u(A,null,q(n.recentTenants,i=>(h(),u("tr",{key:i.id},[s("td",null,[s("div",as,[s("img",{src:i.logo||"/images/default-restaurant.png",class:"tenant-logo me-2",alt:i.name},null,8,es),b(" "+t(i.name),1)])]),s("td",null,t(i.owner_name),1),s("td",null,[s("span",{class:E(["badge",n.getStatusBadgeClass(i.status)])},t(i.status),3)]),s("td",null,[s("div",ns,[i.status==="pending"?(h(),u("button",{key:0,class:"btn btn-sm btn-success",onClick:m=>n.approveTenant(i)},a[5]||(a[5]=[s("i",{class:"fas fa-check"},null,-1)]),8,os)):w("",!0),i.status==="active"?(h(),u("button",{key:1,class:"btn btn-sm btn-warning",onClick:m=>n.suspendTenant(i)},a[6]||(a[6]=[s("i",{class:"fas fa-pause"},null,-1)]),8,is)):w("",!0),i.status==="suspended"?(h(),u("button",{key:2,class:"btn btn-sm btn-success",onClick:m=>n.activateTenant(i)},a[7]||(a[7]=[s("i",{class:"fas fa-play"},null,-1)]),8,ls)):w("",!0)])])]))),128))])])])])])]),s("div",cs,[s("div",rs,[s("div",ds,[s("h5",us,t(e.$t("dashboard.systemStats")),1)]),s("div",hs,[s("div",_s,[s("div",vs,[b(t(e.$t("main_dashboard.stats.totalUsers"))+" ",1),s("span",bs,t(n.stats.totalUsers),1)]),s("div",fs,[b(t(e.$t("main_dashboard.stats.totalRoles"))+" ",1),s("span",ms,t(n.stats.totalRoles),1)]),s("div",ps,[b(t(e.$t("main_dashboard.stats.activeUsers"))+" ",1),s("span",gs,t(n.stats.activeUsersToday),1)])])])]),s("div",ys,[s("div",ws,[s("h5",Ts,t(e.$t("main_dashboard.quickActions.title")),1)]),s("div",Cs,[s("div",ks,[s("div",$s,[p(d,{to:"/dashboard/tenants",class:"quick-action-card"},{default:g(()=>[a[8]||(a[8]=s("i",{class:"fas fa-store"},null,-1)),s("span",null,t(e.$t("main_dashboard.quickActions.manageTenants")),1)]),_:1})]),s("div",Bs,[p(d,{to:"/dashboard/users",class:"quick-action-card"},{default:g(()=>[a[9]||(a[9]=s("i",{class:"fas fa-users"},null,-1)),s("span",null,t(e.$t("main_dashboard.quickActions.manageUsers")),1)]),_:1})]),s("div",As,[p(d,{to:"/dashboard/roles",class:"quick-action-card"},{default:g(()=>[a[10]||(a[10]=s("i",{class:"fas fa-user-shield"},null,-1)),s("span",null,t(e.$t("main_dashboard.quickActions.manageRoles")),1)]),_:1})]),s("div",qs,[s("a",{href:"#",class:"quick-action-card",onClick:a[0]||(a[0]=S((...i)=>n.clearCache&&n.clearCache(...i),["prevent"]))},[a[11]||(a[11]=s("i",{class:"fas fa-sync"},null,-1)),s("span",null,t(e.$t("main_dashboard.quickActions.clearCache")),1)])])])])])])])])}const xs=$(U,[["render",Es],["__scopeId","data-v-2375a42b"]]);export{xs as default};
//# sourceMappingURL=Dashboard-B26BFiy1.js.map
