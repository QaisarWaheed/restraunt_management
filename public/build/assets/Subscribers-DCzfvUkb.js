import{_ as B,L as v,B as L,C as T,c as o,a as e,j,v as V,b as y,f as x,F as k,g as w,t as c,n as f,N as $,S as h,o as n}from"./app-BLvk--SP.js";const D={class:"Reservations-page"},z={class:"mb-4"},I={class:"filter-body"},R={class:"row g-3 align-items-end"},A={class:"col-md-6"},P={class:"card"},U={class:"card-body"},W={key:0,class:"text-center py-5"},q={key:1,class:"text-center py-5 text-muted"},G={key:2,class:"table-responsive"},H={class:"table table-hover table-sm Reservations-table"},J=["onClick"],K={key:3,class:"d-flex justify-content-between align-items-center mt-3"},O={class:"text-muted"},Q={key:0},X={class:"pagination mb-0"},Y=["disabled"],Z=["onClick"],ee=["disabled"],te={__name:"Subscribers",setup(se){const d=v([]),_=v(!1),b=v({search:""}),a=v({current_page:1,last_page:1,per_page:8,total:0,from:0,to:0}),m=async(l=1)=>{_.value=!0;try{const t={page:l,per_page:a.value.per_page,search:b.value.search},s=await $.get("/tenant/subscribers-list",{params:t});if(s.data.success){const{data:i,current_page:r,last_page:p,per_page:u,total:F,from:M,to:N}=s.data.data;d.value=i,a.value={current_page:r,last_page:p,per_page:u,total:F,from:M,to:N}}else d.value=[],a.value={current_page:1,last_page:1,per_page:8,total:0,from:0,to:0}}catch{d.value=[],h.fire({icon:"error",title:"Error",text:"Failed to fetch subscribers."})}finally{_.value=!1}},C=()=>{m(1)},g=l=>{l<1||l>a.value.last_page||m(l)},S=l=>{navigator.clipboard.writeText(l).then(()=>{h.fire({icon:"success",title:"Copied!",text:"Email copied to clipboard.",toast:!0,position:"top-end",showConfirmButton:!1,timer:1200})}).catch(()=>{h.fire({icon:"error",title:"Error",text:"Failed to copy email."})})},E=L(()=>{const l=a.value.last_page,t=a.value.current_page,s=5;let i=Math.max(1,t-2),r=Math.min(l,t+2);r-i<s-1&&(i===1?r=Math.min(l,i+s-1):r===l&&(i=Math.max(1,r-s+1)));const p=[];for(let u=i;u<=r;u++)p.push(u);return p});return T(()=>{m()}),(l,t)=>(n(),o("div",D,[t[8]||(t[8]=e("div",{class:"d-flex justify-content-between align-items-center mb-4"},[e("h4",{class:"mb-0"},"Subscribers List")],-1)),e("div",z,[e("div",I,[e("div",R,[e("div",A,[t[3]||(t[3]=e("label",{class:"form-label mb-1"},"Search",-1)),j(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>b.value.search=s),onInput:C,type:"text",class:"form-control filter-input",placeholder:"Search by email"},null,544),[[V,b.value.search]])])])])]),e("div",P,[e("div",U,[_.value?(n(),o("div",W,t[4]||(t[4]=[e("div",{class:"spinner-border text-danger",role:"status"},[e("span",{class:"visually-hidden"},"Loading...")],-1)]))):d.value.length===0?(n(),o("div",q,t[5]||(t[5]=[e("i",{class:"fas fa-store fa-3x mb-3",style:{color:"#bdbdbd"}},null,-1),e("div",{class:"h5 mb-2"},"No Subscribers Found",-1),e("div",null,[x("No subscribers match your search criteria."),e("br"),x("Try adjusting your filters.")],-1)]))):(n(),o("div",G,[e("table",H,[t[7]||(t[7]=e("thead",null,[e("tr",null,[e("th",null,"Email"),e("th",null,"Created At")])],-1)),e("tbody",null,[(n(!0),o(k,null,w(d.value,s=>(n(),o("tr",{key:s.id},[e("td",null,[e("span",null,c(s.email),1),e("button",{class:"btn btn-link btn-copy p-0 ms-2",onClick:i=>S(s.email),title:"Copy Email"},t[6]||(t[6]=[e("i",{class:"fas fa-copy"},null,-1)]),8,J)]),e("td",null,c(s.created_at?new Date(s.created_at).toLocaleString():""),1)]))),128))])])])),a.value.total>0?(n(),o("div",K,[e("div",O," Showing "+c(a.value.from)+" to "+c(a.value.to)+" of "+c(a.value.total)+" entries ",1),a.value.last_page>1?(n(),o("nav",Q,[e("ul",X,[e("li",{class:f(["page-item",{disabled:a.value.current_page===1}])},[e("button",{class:"page-link",onClick:t[1]||(t[1]=s=>g(a.value.current_page-1)),disabled:a.value.current_page===1},"«",8,Y)],2),(n(!0),o(k,null,w(E.value,s=>(n(),o("li",{key:s,class:f(["page-item",{active:s===a.value.current_page}])},[e("button",{class:"page-link",onClick:i=>g(s)},c(s),9,Z)],2))),128)),e("li",{class:f(["page-item",{disabled:a.value.current_page===a.value.last_page}])},[e("button",{class:"page-link",onClick:t[2]||(t[2]=s=>g(a.value.current_page+1)),disabled:a.value.current_page===a.value.last_page},"»",8,ee)],2)])])):y("",!0)])):y("",!0)])])]))}},le=B(te,[["__scopeId","data-v-4cead3ac"]]);export{le as default};
//# sourceMappingURL=Subscribers-DCzfvUkb.js.map
