{"version":3,"file":"Bulletin-L4RbBsab.js","sources":["../../../resources/js/views/tenant_dashboard/Bulletin.vue"],"sourcesContent":["<template>\n  <div class=\"settings-page\">\n    <div class=\"d-flex justify-content-between align-items-center mb-4\">\n      <h4 class=\"mb-0\">Bulliten Board</h4>\n    </div>\n\n    <div class=\"card\">\n      <div class=\"card-body\">\n        <div v-if=\"loading\" class=\"text-center py-5\">\n          <div class=\"spinner-border text-primary\" role=\"status\">\n            <span class=\"visually-hidden\">Loading...</span>\n          </div>\n        </div>\n        <form v-else @submit.prevent=\"saveSettings\" class=\"settings-form\">\n          <div class=\"section mb-4\">\n            <h5 class=\"section-title\">Discount News</h5>\n            <div class=\"row g-3\">\n              <div class=\"col-md-6\">\n                <label class=\"form-label\">Discount (in %)\n                  <span class=\"ms-1\" data-bs-toggle=\"tooltip\" title=\"Enter your discount percentage.\">\n                    <i class=\"fas fa-info-circle text-secondary\"></i>\n                  </span>\n                </label>\n                <input v-model=\"form.discount\" type=\"number\" min=\"0\" max=\"100\" class=\"form-control\" required placeholder=\"Discount %\">\n              </div>\n            </div>\n          </div>\n          <div class=\"text-end\">\n            <button type=\"submit\" class=\"btn btn-primary\" :disabled=\"saving\">\n              <span v-if=\"saving\" class=\"spinner-border spinner-border-sm me-2\" role=\"status\"></span>\n              Save Discount\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref, onMounted, watch } from 'vue'\nimport axios from 'axios'\nimport Swal from 'sweetalert2'\nimport { Tooltip } from 'bootstrap'\n\nexport default {\n  name: 'Settings',\n  setup() {\n    const loading = ref(true)\n    const saving = ref(false)\n    const logoInput = ref(null)\n    const staticCurrencies = [\n      { name: 'USD', symbol: '$' },\n      { name: 'EUR', symbol: '€' },\n      { name: 'GBP', symbol: '£' },\n      { name: 'INR', symbol: '₹' },\n      { name: 'CAD', symbol: 'C$' },\n      { name: 'AUD', symbol: 'A$' },\n      { name: 'JPY', symbol: '¥' },\n      // Add more as needed\n    ];\n    const form = ref({\n      discount: ''\n    })\n\n    const handleLogoUpload = async (event) => {\n      const file = event.target.files[0]\n      if (!file) return\n\n      // Validate file size (2MB max)\n      if (file.size > 2 * 1024 * 1024) {\n        Swal.fire({\n          icon: 'error',\n          title: 'Error',\n          text: 'Logo file size must be less than 2MB'\n        })\n        return\n      }\n\n      // Validate file type\n      if (!file.type.startsWith('image/')) {\n        Swal.fire({\n          icon: 'error',\n          title: 'Error',\n          text: 'Please upload an image file'\n        })\n        return\n      }\n\n      const formData = new FormData()\n      formData.append('logo', file)\n\n      try {\n        const response = await axios.post('/tenant/upload-logo', formData, {\n          headers: {\n            'Content-Type': 'multipart/form-data'\n          }\n        })\n\n        if (response.data.success) {\n          form.value.logo = response.data.url\n        } else {\n          throw new Error(response.data.message || 'Failed to upload logo')\n        }\n      } catch (error) {\n        console.error('Error uploading logo:', error)\n        Swal.fire({\n          icon: 'error',\n          title: 'Error',\n          text: error.response?.data?.message || 'Failed to upload logo'\n        })\n      }\n    }\n\n    const fetchSettings = async () => {\n      try {\n        const response = await axios.get('/tenant/settings')\n        if (response.data.success && response.data.data) {\n          const settings = response.data.data\n          form.value = {\n            discount: settings.discount || ''\n          }\n          // --- Fix: set currency by symbol if present ---\n          if (settings.currency_symbol) {\n            const found = staticCurrencies.find(c => c.symbol === settings.currency_symbol)\n            if (found) {\n              form.value.currency_symbol = found.symbol\n            }\n          }\n        }\n      } catch (error) {\n        console.error('Error fetching settings:', error)\n        Swal.fire({\n          icon: 'error',\n          title: 'Error',\n          text: 'Failed to fetch settings'\n        })\n      } finally {\n        loading.value = false\n      }\n    }\n\n    const saveSettings = async () => {\n      saving.value = true\n      try {\n        const response = await axios.put('/tenant/settings/discount', { discount: form.value.discount })\n        if (response.data.success) {\n          Swal.fire({\n            icon: 'success',\n            title: 'Success',\n            text: 'Discount updated successfully',\n            toast: true,\n            position: 'top-end',\n            showConfirmButton: false,\n            timer: 3000\n          })\n        } else {\n          throw new Error(response.data.message || 'Failed to save discount')\n        }\n      } catch (error) {\n        console.error('Error saving discount:', error)\n        Swal.fire({\n          icon: 'error',\n          title: 'Error',\n          text: error.response?.data?.message || 'Failed to save discount'\n        })\n      } finally {\n        saving.value = false\n      }\n    }\n\n    onMounted(() => {\n      Promise.all([fetchSettings()]).then(() => {\n        // setCurrencySymbol() // This function is no longer needed\n      })\n      document.querySelectorAll('[data-bs-toggle=\"tooltip\"]').forEach(el => {\n        new Tooltip(el)\n      })\n    })\n\n    return {\n      form,\n      loading,\n      saving,\n      logoInput,\n      staticCurrencies,\n      handleLogoUpload,\n      saveSettings\n    }\n  }\n}\n</script>\n\n<style scoped>\n.settings-page {\n  padding: 20px;\n  font-family: 'Inter', 'Roboto', 'Segoe UI', Arial, sans-serif;\n}\n\n.section {\n  background: #fff;\n  border-radius: 8px;\n  padding: 1.5rem;\n  box-shadow: 0 1px 3px rgba(0,0,0,0.1);\n}\n\n.section-title {\n  color: #2c3e50;\n  font-size: 1.1rem;\n  font-weight: 600;\n  margin-bottom: 1.5rem;\n  padding-bottom: 0.5rem;\n  border-bottom: 2px solid #f0f0f0;\n}\n\n.form-label {\n  font-weight: 500;\n  color: #4a5568;\n  margin-bottom: 0.5rem;\n}\n\n.form-control, .form-select {\n  border: 1px solid #e2e8f0;\n  border-radius: 6px;\n  padding: 0.5rem 0.75rem;\n  font-size: 0.95rem;\n}\n\n.form-control:focus, .form-select:focus {\n  border-color: #4299e1;\n  box-shadow: 0 0 0 3px rgba(66, 153, 225, 0.1);\n}\n\n.btn-primary {\n  background: #4299e1;\n  border: none;\n  padding: 0.6rem 1.5rem;\n  font-weight: 500;\n  border-radius: 6px;\n  transition: all 0.2s;\n}\n\n.btn-primary:hover {\n  background: #3182ce;\n  transform: translateY(-1px);\n}\n\n.btn-primary:disabled {\n  background: #a0aec0;\n  cursor: not-allowed;\n  transform: none;\n}\n\n.form-check-input:checked {\n  background-color: #4299e1;\n  border-color: #4299e1;\n}\n\n.logo-preview {\n  width: 100px;\n  height: 100px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: #f8fafc;\n  border-radius: 6px;\n  overflow: hidden;\n}\n\n.logo-preview img {\n  max-width: 100%;\n  max-height: 100%;\n  object-fit: contain;\n}\n</style>"],"names":["_sfc_main","loading","ref","saving","logoInput","staticCurrencies","form","handleLogoUpload","event","file","Swal","formData","response","axios","error","_b","_a","fetchSettings","settings","found","c","saveSettings","onMounted","el","Tooltip","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_openBlock","_createElementBlock","_createElementVNode","$setup","_hoisted_4","_cache","_withModifiers","args","_createTextVNode","$event","_vModelText","_hoisted_10","_createCommentVNode"],"mappings":"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"}