import{_ as L,L as c,C as P,N as O,B as w,Q as R,c as o,a as e,F as g,g as C,b as Y,i as T,j as y,v as _,R as z,f as D,t as l,u as q,S as p,K as G,o as r,n as J,U as Q}from"./app-BLvk--SP.js";const H={class:"container mt-100"},K={class:"checkout-page container py-4"},W={class:"row"},X={class:"col-lg-8 mb-4"},Z={class:"checkout-steps mb-4 d-flex flex-wrap justify-content-between"},ee={class:"step-index"},te={class:"step-title"},se={class:"checkout-step-content p-4 bg-white rounded shadow-sm mb-3"},le={class:"row g-3"},ae={class:"col-md-6 col-12"},ne={class:"col-md-6 col-12"},oe={class:"col-md-6 col-12"},re={class:"col-md-6 col-12"},de={class:"col-12"},ie={class:"form-check mb-2"},ue={key:2},ce={class:"mb-3"},ve={class:"mb-3"},me={class:"mb-3"},ye={class:"table table-sm"},pe={class:"d-flex justify-content-end"},fe={class:"fw-bold"},be={key:1,class:"text-center py-5"},_e={class:"col-lg-4"},xe={class:"order-summary bg-white rounded shadow-sm p-3 mb-4"},he={key:0},we={class:"ms-2 flex-grow-1"},ge={class:"text-muted",style:{"font-size":"0.95em"}},ke={class:"fw-bold"},Ne={class:"border-top pt-2 mt-2"},Se={class:"d-flex justify-content-between"},Ce={class:"d-flex justify-content-between"},De={class:"d-flex justify-content-between fw-bold"},qe={key:1,class:"text-muted text-center py-4"},Ee={__name:"Checkout",setup(Fe){const v=R("cart",Q()),$=G(),E=[{key:"address",title:"Delivery Address"},{key:"delivery",title:"Delivery Method"},{key:"review",title:"Order Review"}],d=c(0),F=c(!1),a=c({firstName:"",lastName:"",middleName:"",company:"",email:"",phone:"",country:"",city:"",place:"",postalCode:"",address:""}),k=c("free");c("credit"),c({cardName:"",cardNumber:"",expMonth:"",expYear:"",cvv:""});const n=c({currency:"USD",discount:0});P(async()=>{const i=sessionStorage.getItem("tenant_settings");if(i)try{n.value=JSON.parse(i)}catch{}try{const t=await O.get("/tenant/get-tenant-details");t.data.success&&t.data.data&&(n.value.currency_symbol=t.data.data.currency_symbol||"$",n.value.discount=t.data.data.discount||0,sessionStorage.setItem("tenant_settings",JSON.stringify(n.value)))}catch{}});const U=w(()=>{switch(k.value){case"free":return"Free Delivery (0.00, 7-14 days)";case"standard":return"Standard Delivery (7.99, 5-7 days)";case"express":return"Express Delivery (29.99, 1 day)";default:return""}}),x=w(()=>v.cart.items.reduce((i,t)=>i+t.price*t.quantity,0)),B=w(()=>x.value*(n.value.discount/100)),N=w(()=>x.value-B.value);function V(){d.value<E.length-1&&d.value++}function j(){d.value>0&&d.value--}async function A(){try{const i={name:a.value.firstName+" "+(a.value.lastName||""),email:a.value.email,address:a.value.address,phone:a.value.phone,device_info:navigator.userAgent,status:"active"},t={total_amount:N.value,status:"pending",delivery_address:a.value.address,currency_symbol:n.value.currency_symbol||"$"},s=v.cart.items.map(u=>({product_id:u.id,quantity:u.quantity,price:u.price})),m=await O.post("/tenant/save-order",{customer:i,order:t,order_details:s});if(m.data.success)await p.fire({title:"Thank you!",text:"Please rate your experience.",icon:"success",html:`<div id='swal-stars' style='font-size:2rem; color: #f6c700; display: flex; justify-content: center;'>
          <i class='fa fa-star' data-value='1'></i>
          <i class='fa fa-star' data-value='2'></i>
          <i class='fa fa-star' data-value='3'></i>
          <i class='fa fa-star' data-value='4'></i>
          <i class='fa fa-star' data-value='5'></i>
        </div>`,showConfirmButton:!0,confirmButtonText:"Submit",didOpen:()=>{let u=5;const h=p.getHtmlContainer().querySelectorAll(".fa-star");h.forEach((S,M)=>{S.addEventListener("mouseenter",()=>{h.forEach((f,b)=>f.style.color=b<=M?"#f6c700":"#ccc")}),S.addEventListener("mouseleave",()=>{h.forEach((f,b)=>f.style.color=b<u?"#f6c700":"#ccc")}),S.addEventListener("click",()=>{u=M+1,h.forEach((f,b)=>f.style.color=b<u?"#f6c700":"#ccc"),p.setInputValue(u)})}),p.setInputValue(u)},preConfirm:()=>p.getInput().value,input:"hidden",inputValue:5}),v.clearCart(),F.value=!0;else throw new Error(m.data.message||"Order not saved")}catch(i){p.fire({icon:"error",title:"Order Failed",text:i.message||"Could not save your order. Please try again."})}}function I(){$.push({name:"tenant-landing"})}return(i,t)=>(r(),o("div",H,[e("div",K,[e("div",W,[e("div",X,[e("div",Z,[(r(),o(g,null,C(E,(s,m)=>e("div",{key:s.key,class:J(["checkout-step flex-fill text-center mb-2",{active:d.value===m,done:m<d.value}])},[e("span",ee,l(m+1),1),e("span",te,l(s.title),1)],2)),64))]),e("div",se,[d.value===0?(r(),o("form",{key:0,onSubmit:T(V,["prevent"])},[t[11]||(t[11]=e("h4",{class:"mb-3"},"Delivery Address",-1)),e("div",le,[e("div",ae,[t[6]||(t[6]=e("label",{class:"form-label"},"First Name*",-1)),y(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>a.value.firstName=s),class:"form-control",required:""},null,512),[[_,a.value.firstName]])]),e("div",ne,[t[7]||(t[7]=e("label",{class:"form-label"},"Last Name*",-1)),y(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>a.value.lastName=s),class:"form-control",required:""},null,512),[[_,a.value.lastName]])]),e("div",oe,[t[8]||(t[8]=e("label",{class:"form-label"},"Email*",-1)),y(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>a.value.email=s),type:"email",class:"form-control",required:""},null,512),[[_,a.value.email]])]),e("div",re,[t[9]||(t[9]=e("label",{class:"form-label"},"Phone*",-1)),y(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>a.value.phone=s),class:"form-control",type:"tel",pattern:"[0-9\\-\\+\\s]*",inputmode:"tel",required:""},null,512),[[_,a.value.phone]])]),e("div",de,[t[10]||(t[10]=e("label",{class:"form-label"},"Address*",-1)),y(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=s=>a.value.address=s),class:"form-control",required:""},null,512),[[_,a.value.address]])])]),t[12]||(t[12]=e("div",{class:"d-flex justify-content-end mt-4"},[e("button",{class:"btn btn-danger w-100 w-md-auto",type:"submit"},"Next")],-1))],32)):d.value===1?(r(),o("form",{key:1,onSubmit:T(V,["prevent"])},[t[15]||(t[15]=e("h4",{class:"mb-3"},"Delivery Method",-1)),e("div",ie,[y(e("input",{class:"form-check-input",type:"radio",id:"free",value:"free","onUpdate:modelValue":t[5]||(t[5]=s=>k.value=s),required:""},null,512),[[z,k.value]]),t[13]||(t[13]=e("label",{class:"form-check-label",for:"free"},[e("b",null,"Free Delivery"),D(" 0.00 / Delivery in 7 to 14 business Days ")],-1))]),e("div",{class:"d-flex justify-content-between mt-4"},[e("button",{class:"btn btn-secondary w-50 me-2",type:"button",onClick:j},"Back"),t[14]||(t[14]=e("button",{class:"btn btn-danger w-50",type:"submit"},"Next",-1))])],32)):d.value===2?(r(),o("div",ue,[F.value?(r(),o("div",be,[t[21]||(t[21]=e("h3",{class:"mb-3 text-success"},"Thank You!",-1)),t[22]||(t[22]=e("p",null,"Your order has been processed.",-1)),e("button",{class:"btn btn-danger mt-3",onClick:I},"Return to Shop")])):(r(),o(g,{key:0},[t[20]||(t[20]=e("h4",{class:"mb-3"},"Order Review",-1)),e("div",ce,[t[16]||(t[16]=e("b",null,"Delivery Address:",-1)),e("div",null,l(a.value.firstName)+" "+l(a.value.lastName)+", "+l(a.value.email)+", "+l(a.value.phone),1),e("div",null,l(a.value.address),1)]),e("div",ve,[t[17]||(t[17]=e("b",null,"Delivery Method:",-1)),D(" "+l(U.value),1)]),e("div",me,[t[19]||(t[19]=e("b",null,"Shopping Cart:",-1)),e("table",ye,[t[18]||(t[18]=e("thead",null,[e("tr",null,[e("th",null,"Name"),e("th",null,"Unit Price"),e("th",null,"Quantity"),e("th",null,"Total")])],-1)),e("tbody",null,[(r(!0),o(g,null,C(q(v).cart.items,s=>(r(),o("tr",{key:s.id},[e("td",null,l(s.name),1),e("td",null,l(n.value.currency_symbol||"$")+" "+l(s.price),1),e("td",null,l(s.quantity),1),e("td",null,l(n.value.currency_symbol||"$")+" "+l((s.price*s.quantity).toFixed(2)),1)]))),128))])]),e("div",pe,[e("div",null,[e("div",null,"SubTotal: "+l(n.value.currency_symbol||"$")+" "+l(x.value.toFixed(2)),1),e("div",null,"Discount: "+l(n.value.discount)+"%",1),e("div",fe,"Grand total: "+l(n.value.currency_symbol||"$")+" "+l(N.value.toFixed(2)),1)])])]),e("div",{class:"d-flex justify-content-between mt-4 flex-wrap"},[e("button",{class:"btn btn-secondary w-50 me-2 mb-2 mb-md-0",type:"button",onClick:j},"Back"),e("button",{class:"btn btn-danger w-50",onClick:A},"Place Order Now")])],64))])):Y("",!0)])]),e("div",_e,[e("div",xe,[t[26]||(t[26]=e("h5",{class:"mb-3"},[e("i",{class:"fas fa-list-alt me-2"}),D("Order Summary")],-1)),q(v).cart.items.length?(r(),o("div",he,[(r(!0),o(g,null,C(q(v).cart.items,s=>(r(),o("div",{key:s.id,class:"d-flex align-items-center mb-2"},[e("div",we,[e("div",null,l(s.name),1),e("div",ge,l(n.value.currency_symbol||"$")+" "+l(s.price)+" x "+l(s.quantity),1)]),e("div",ke,l(n.value.currency_symbol||"$")+" "+l((s.price*s.quantity).toFixed(2)),1)]))),128)),e("div",Ne,[e("div",Se,[t[23]||(t[23]=e("span",null,"SubTotal:",-1)),e("span",null,l(n.value.currency_symbol||"$")+" "+l(x.value.toFixed(2)),1)]),e("div",Ce,[t[24]||(t[24]=e("span",null,"Discount:",-1)),e("span",null,l(n.value.discount)+"%",1)]),e("div",De,[t[25]||(t[25]=e("span",null,"Grand total:",-1)),e("span",null,l(n.value.currency_symbol||"$")+" "+l(N.value.toFixed(2)),1)])])])):(r(),o("div",qe," Your Cart Is Currently Empty! "))])])])])]))}},je=L(Ee,[["__scopeId","data-v-d8b88e91"]]);export{je as default};
//# sourceMappingURL=Checkout-wxcNYdx2.js.map
